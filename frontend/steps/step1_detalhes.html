<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Etapa 1 - Detalhes da Campanha</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <style>
    body { background-color: #f8f9fa; font-family: 'Segoe UI', sans-serif; }
    .card { margin-top: 50px; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
    .form-label { font-weight: 600; }
  </style>
</head>
<body>
  <div class="container">
    <div class="card p-4">
      <h2 class="mb-4">üìù Etapa 1: Detalhes da Campanha</h2>
      <form id="step1Form">
        <div class="mb-3">
          <label for="nomeCampanha" class="form-label">Nome da Campanha</label>
          <input type="text" class="form-control" id="nomeCampanha" required>
        </div>
        <div class="mb-3">
          <label for="descricao" class="form-label">Descri√ß√£o</label>
          <textarea class="form-control" id="descricao" rows="2"></textarea>
        </div>
        <div class="mb-3">
          <label for="tipoEnvio" class="form-label">Tipo de Envio</label>
          <select class="form-select" id="tipoEnvio" required>
            <option value="imediato">Imediato</option>
            <option value="agendado">Agendado</option>
          </select>
        </div>
        <div class="mb-3" id="campoData" style="display: none;">
          <label for="dataAgendada" class="form-label">Data e Hora do Envio</label>
          <input type="datetime-local" class="form-control" id="dataAgendada">
        </div>
        <button type="submit" class="btn btn-primary">Pr√≥ximo ‚û°Ô∏è</button>
      </form>
    </div>
  </div>

  <script>
    document.getElementById("tipoEnvio").addEventListener("change", function() {
      document.getElementById("campoData").style.display = this.value === "agendado" ? "block" : "none";
    });

    document.getElementById("step1Form").addEventListener("submit", async function(e) {
      e.preventDefault();
      const payload = {
        nome: document.getElementById("nomeCampanha").value,
        descricao: document.getElementById("descricao").value,
        tipoEnvio: document.getElementById("tipoEnvio").value,
        dataAgendada: document.getElementById("dataAgendada").value || null
      };
      await fetch("http://localhost:3000/api/campaigns/temp", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
      });
      window.location.href = "step2_mensagem.html";
    });
  </script>
</body>
</html>
