<!DOCTYPE html>
<html lang="pt-br"><head><meta charset="UTF-8"><title>Etapa 2 - Mensagem</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head><body><div class="container mt-5"><div class="card p-4">
<h2>üí¨ Etapa 2: Composi√ß√£o da Mensagem</h2>
<form id="step2Form">
<div class="mb-3">
<button type="button" onclick="inserir('{nome}')" class="btn btn-sm btn-secondary">{nome}</button>
<button type="button" onclick="inserir('{ref}')" class="btn btn-sm btn-secondary">{ref}</button>
<textarea id="mensagem" class="form-control mt-2" rows="4" required></textarea>
</div><div class="border bg-white p-3" id="preview">Sua mensagem aparecer√° aqui</div>
<button type="submit" class="btn btn-primary mt-3">Pr√≥ximo ‚û°Ô∏è</button>
</form></div></div>
<script>
const msg=document.getElementById("mensagem"),prev=document.getElementById("preview");
msg.addEventListener("input",()=>{prev.innerText=msg.value.replace(/{nome}/g,"Jo√£o").replace(/{ref}/g,"Oferta")});
function inserir(txt){const c=msg.selectionStart;msg.value=msg.value.slice(0,c)+txt+msg.value.slice(c);msg.dispatchEvent(new Event("input"));msg.focus();}
document.getElementById("step2Form").addEventListener("submit",async e=>{
e.preventDefault();await fetch("http://localhost:3000/api/campaigns/temp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mensagem:msg.value})});
location.href="step3_contatos.html";});
</script></body></html>